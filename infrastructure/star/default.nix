{ config, lib, pkgs, ... }:
with lib;
{

  imports = [
    ./hardware.nix
  ];

  config = mkIf (config.navi.device == "star") {
    networking.hostName = "star"; # Define your hostname.
    users.motd = ''
      [49m         [38;5;0mâ–„â–„[38;5;167;48;5;0mâ–„[38;5;0;49mâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„ [49mâ–„[38;5;167;48;5;0mâ–„[38;5;0;49mâ–„     [0m
           [38;5;0mâ–„â–„[38;5;222;48;5;0mâ–„â–„[48;5;222m [48;5;0m [38;5;0;48;5;239mâ–„[48;5;167m [38;5;167;48;5;0mâ–„[38;5;0;48;5;179mâ–„â–„[48;5;222mâ–„â–„â–„â–„â–„[48;5;179mâ–„[38;5;167;48;5;0mâ–„[48;5;167m [38;5;0;48;5;239mâ–„[48;5;0m [49m     [0m
         [38;5;0mâ–„[38;5;222;48;5;0mâ–„[48;5;222m    [38;5;0mâ–„[38;5;239;48;5;0mâ–„[38;5;167;48;5;239mâ–„[38;5;0;48;5;167mâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„ [38;5;167;48;5;0mâ–„[38;5;0;49mâ–„    [0m
        [38;5;0mâ–„[38;5;222;48;5;0mâ–„[48;5;222m   [38;5;0mâ–„[38;5;239;48;5;0mâ–„[38;5;0;48;5;239mâ–„[38;5;179;48;5;0mâ–„â–„[38;5;222;48;5;179mâ–„â–„[48;5;222m          [38;5;179;48;5;0mâ–„[38;5;0;48;5;239mâ–„ [48;5;0m [49m   [0m
        [48;5;0m [48;5;222m   [38;5;0mâ–„[38;5;239;48;5;0mâ–„[38;5;0;48;5;239mâ–„[48;5;0m [38;5;222;48;5;179mâ–„[38;5;0;48;5;222mâ–„[38;5;222;48;5;0mâ–„[38;5;0;48;5;222mâ–„â–„â–„[38;5;222;48;5;0mâ–„[48;5;222m    [38;5;179mâ–„ [38;5;222;48;5;179mâ–„â–„[38;5;0mâ–„[48;5;0m [48;5;239m [48;5;0m [49m  [0m
        [48;5;0m [48;5;222m   [48;5;0m [48;5;239m [48;5;0m [48;5;222m [38;5;222;48;5;0mâ–„â–„[48;5;222m   [38;5;179mâ–„â–„â–„[48;5;179m [38;5;0;48;5;222mâ–„[48;5;179mâ–„[38;5;173;48;5;0mâ–„[38;5;0;48;5;179mâ–„[48;5;222mâ–„[48;5;179m [38;5;179;48;5;222mâ–„ [38;5;222;48;5;0mâ–„[38;5;179;48;5;222mâ–„[48;5;0m [49m [0m
        [48;5;0m [48;5;222m   [38;5;0;48;5;179mâ–„[38;5;216;48;5;0mâ–„â–„â–„[38;5;0;48;5;222mâ–„[48;5;179mâ–„â–„â–„â–„[38;5;15;48;5;0mâ–„   [38;5;173;48;5;95mâ–„[38;5;223;48;5;173mâ–„â–„[48;5;0m [48;5;15m [48;5;0m  [38;5;0;48;5;179mâ–„â–„[38;5;0;48;5;0mâ–„[49m  [0m
        [38;5;0;48;5;0mâ–„[38;5;0;48;5;222mâ–„  [48;5;0m [48;5;216m [38;5;216;48;5;0mâ–„[38;5;0;48;5;234mâ–„[48;5;216m [48;5;223m [48;5;0m [48;5;15m   [48;5;0m   [48;5;223m   [48;5;0m [48;5;15m [48;5;0m  [48;5;222m [48;5;0m [49m   [0m
         [48;5;0m [48;5;222m  [38;5;179;48;5;0mâ–„[38;5;0;48;5;216mâ–„[48;5;223m [38;5;223;48;5;0mâ–„[48;5;223m [38;5;173mâ–„ [38;5;223;48;5;0mâ–„[38;5;0;48;5;15mâ–„â–„â–„[48;5;0m [38;5;223mâ–„[48;5;223m  [38;5;95mâ–„[38;5;173;48;5;0mâ–„[38;5;0;48;5;15mâ–„â–„[48;5;0m [48;5;179m [48;5;0m [49m   [0m
         [48;5;0m [48;5;222m  [48;5;179m  [38;5;179;48;5;0mâ–„â–„â–„[38;5;0;48;5;173mâ–„[38;5;173;48;5;223mâ–„[48;5;218m [38;5;218;48;5;223mâ–„[48;5;218m [48;5;223m [38;5;0mâ–„      [48;5;218m [48;5;0m [48;5;179m [48;5;0m [49m   [0m
         [38;5;0;48;5;0mâ–„[38;5;0;48;5;222mâ–„  [48;5;179m     [38;5;179;48;5;0mâ–„[38;5;0;48;5;173mâ–„[38;5;173;48;5;218mâ–„[48;5;223mâ–„  [38;5;223;48;5;0mâ–„â–„â–„[48;5;223m  [38;5;0mâ–„[38;5;179;48;5;0mâ–„[48;5;179m  [48;5;0m [49m   [0m
          [48;5;0m [48;5;222m  [48;5;179m       [38;5;179;48;5;0mâ–„â–„ [38;5;173mâ–„â–„â–„   [48;5;179m    [48;5;0m [49m   [0m
          [48;5;0m [48;5;222m  [48;5;179m     [38;5;0mâ–„[38;5;66;48;5;0mâ–„[38;5;115mâ–„â–„â–„â–„â–„[38;5;0;48;5;223mâ–„â–„[48;5;173mâ–„[48;5;0m  [48;5;179mâ–„  [48;5;0m [49m   [0m
          [48;5;0m [48;5;222m  [48;5;179m    [48;5;0m [38;5;15;48;5;115mâ–„â–„[38;5;115;48;5;66mâ–„[38;5;66;48;5;115mâ–„â–„      [48;5;0m [38;5;222mâ–„[38;5;0;48;5;179mâ–„ [48;5;0m [49m   [0m
         [38;5;0mâ–„[38;5;222;48;5;0mâ–„[48;5;222m  [48;5;179m   [38;5;0mâ–„[38;5;173;48;5;0mâ–„[38;5;223mâ–„[38;5;173mâ–„[38;5;0;48;5;15mâ–„[48;5;0m [48;5;66m  [48;5;115m  [38;5;168mâ–„[48;5;168m [48;5;0m [48;5;222m [48;5;0m  [48;5;179m  [48;5;0m [49m  [0m
         [48;5;0m [48;5;222m  [38;5;179mâ–„[48;5;179m   [48;5;0m [48;5;223m   [48;5;173m [48;5;0m  [38;5;0;48;5;66mâ–„ [48;5;115m [48;5;168mâ–„[38;5;179;48;5;0mâ–„[38;5;0;48;5;222mâ–„[48;5;0m [38;5;66mâ–„ [48;5;179m  [48;5;0m [49m  [0m
        [38;5;0mâ–„[38;5;222;48;5;0mâ–„[48;5;222m  [48;5;179m   [48;5;0m [48;5;223m   [38;5;173mâ–„[38;5;0;48;5;173mâ–„[38;5;179;48;5;0mâ–„[48;5;179m [48;5;0m [38;5;0;48;5;66mâ–„[38;5;179;48;5;0mâ–„[38;5;0;48;5;179mâ–„[38;5;66;48;5;0mâ–„[48;5;66m [38;5;115mâ–„â–„[48;5;0m [48;5;179m  [48;5;0m [49m  [0m
        [48;5;0m [48;5;222m   [48;5;179m  [48;5;0m [48;5;223m   [38;5;173mâ–„[38;5;0;48;5;173mâ–„[38;5;179;48;5;0mâ–„[48;5;179m [48;5;0m [48;5;0mâ–„[38;5;0;48;5;179mâ–„[38;5;66;48;5;0mâ–„[48;5;66m [48;5;115m    [48;5;0m [38;5;223mâ–„[38;5;0;48;5;179mâ–„ [48;5;0m [49m [0m
       [48;5;0m [48;5;222m    [38;5;0;48;5;179mâ–„[38;5;173;48;5;0mâ–„[38;5;223;48;5;173mâ–„â–„[48;5;223m [38;5;173mâ–„[48;5;173m [48;5;0m [38;5;222mâ–„ [38;5;0;48;5;179mâ–„[38;5;66;48;5;0mâ–„[48;5;66m  [48;5;115m     [38;5;115;48;5;0mâ–„[38;5;0;48;5;173mâ–„[38;5;173;48;5;223mâ–„[38;5;223;48;5;0mâ–„ [49m [0m
      [38;5;0mâ–„[38;5;222;48;5;0mâ–„[48;5;222m  [38;5;0mâ–„[38;5;223;48;5;0mâ–„[48;5;223m  [38;5;0mâ–„â–„ [48;5;173m [48;5;0m [48;5;222m  [38;5;179mâ–„[38;5;0;48;5;179mâ–„[38;5;115;48;5;0mâ–„[48;5;115m        [48;5;0mâ–„[38;5;0;48;5;173mâ–„[48;5;223mâ–„â–„[48;5;0m [0m
      [48;5;0m [48;5;222m [48;5;0m [48;5;222m [38;5;222;48;5;0mâ–„â–„â–„[38;5;179mâ–„[48;5;179m [48;5;0m [38;5;0;48;5;223mâ–„[38;5;179;48;5;0mâ–„â–„[38;5;0;48;5;179mâ–„[38;5;145;48;5;0mâ–„[38;5;0;48;5;179mâ–„[38;5;145;48;5;0mâ–„[48;5;115m         [38;5;15mâ–„[48;5;0mâ–„[38;5;0;48;5;179mâ–„[48;5;0m [49m [0m
       [48;5;0m [48;5;222m      [48;5;179m     [48;5;0m [38;5;131mâ–„[38;5;239mâ–„[38;5;0;48;5;145mâ–„[48;5;15mâ–„â–„[48;5;145mâ–„[48;5;15mâ–„â–„[48;5;145mâ–„[48;5;15mâ–„â–„[48;5;145mâ–„[48;5;15mâ–„[38;5;179;48;5;0mâ–„[48;5;179m [48;5;0m [49m [0m
        [48;5;0m [48;5;222m      [38;5;222;48;5;179mâ–„  [38;5;0mâ–„[38;5;239;48;5;0mâ–„[38;5;168;48;5;131mâ–„[48;5;210mâ–„[38;5;210;48;5;131mâ–„[48;5;239mâ–„â–„[48;5;0m [38;5;131;48;5;239mâ–„[38;5;168mâ–„[48;5;131mâ–„[48;5;210mâ–„â–„[48;5;0m [48;5;179m [38;5;222mâ–„[48;5;0m [49m  [0m
         [38;5;0;48;5;0mâ–„[38;5;0;48;5;222mâ–„â–„  [38;5;222;48;5;0mâ–„[38;5;0;48;5;222mâ–„ [48;5;222mâ–„[38;5;239;48;5;0mâ–„[38;5;168;48;5;131mâ–„[48;5;210m [38;5;210;48;5;168mâ–„â–„â–„[38;5;0mâ–„[38;5;239;48;5;0mâ–„[48;5;131mâ–„[48;5;210mâ–„[38;5;168mâ–„â–„[48;5;0m [48;5;222m [38;5;0mâ–„[38;5;0;48;5;0mâ–„[49m   [0m
            [38;5;0;48;5;0mâ–„â–„â–„[49m [48;5;0mâ–„ [38;5;238mâ–„[38;5;0;48;5;168mâ–„â–„â–„â–„â–„[48;5;0m [38;5;238mâ–„â–„â–„[38;5;239mâ–„â–„ [38;5;0mâ–„[49m     [0m
                [48;5;0m [48;5;238m  [38;5;239mâ–„[48;5;239m    [48;5;0m [48;5;238m  [48;5;239m   [48;5;0m [49m      [0m
                [48;5;0m [48;5;238m [38;5;239mâ–„[48;5;239m     [48;5;0m [48;5;238m [48;5;238mâ–„[48;5;239m   [48;5;0m [49m      [0m
               [48;5;0m [48;5;238m  [48;5;239m     [48;5;238m [48;5;0m [38;5;238;48;5;145mâ–„[38;5;145;48;5;239mâ–„[38;5;238mâ–„â–„[38;5;0mâ–„[38;5;15;48;5;0mâ–„[38;5;0;49mâ–„     [0m
               [48;5;0m [48;5;238m [38;5;238;48;5;15mâ–„[38;5;15;48;5;239mâ–„[38;5;238mâ–„â–„[38;5;0mâ–„[38;5;15;48;5;0mâ–„[38;5;0;48;5;238mâ–„[48;5;0m [38;5;145;48;5;238mâ–„â–„[38;5;15mâ–„[48;5;239mâ–„â–„â–„[48;5;0m [49m     [0m
               [48;5;0m [38;5;0;48;5;145mâ–„[38;5;145;48;5;238mâ–„â–„[38;5;15;48;5;239mâ–„â–„â–„â–„â–„[48;5;0m [38;5;0mâ–„â–„â–„â–„â–„â–„â–„[49m     [0m
                 [38;5;0;48;5;0mâ–„â–„â–„â–„â–„â–„â–„â–„[49m            [0m
           
                Welcome to star!
             Sometimes, all you need
             is a good old magic wand
    '';


    time.timeZone = "Europe/Paris";

    #modules.tor.transparentProxy = {
    #  enable = true; 
    #  outputNic = "wlp1s0"; 
    #  inputNic = "wlp1s0"; 
    #  };


    navi.components = {
      bluetooth.enable = true;
      virtualization.enable = true;
      wm = {
        battery = true;
        azerty = true;
        extraConf = ''
          input "2:10:TPPS/2_IBM_TrackPoint" {
            pointer_accel 0.7
          }
          input "2:7:SynPS/2_Synaptics_TouchPad" {
            tap enabled
          }
          input "1:1:AT_Translated_Set_2_keyboard" {
            xkb_layout "fr"
          }
        '';
      };
    };

    home-manager.users.govanify = {
      home.file."Pictures/wallpaper.png".source = ./wallpaper.png;
    };

    navi.profile.name = "laptop";
  };
}
