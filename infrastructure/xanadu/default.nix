{ config, lib, pkgs, ... }:
with lib;
{

  imports = [
    ./hardware.nix
  ];

  config = mkIf (config.navi.device == "xanadu") {
    networking.hostName = "xanadu"; # Define your hostname.
    users.motd = ''
            [49m   [38;5;52mâ–„[38;5;168;48;5;52mâ–„â–„[38;5;52;49mâ–„â–„[38;5;168;48;5;52mâ–„â–„â–„[38;5;52;49mâ–„    [0m
              [48;5;52m [38;5;218;48;5;168mâ–„[48;5;218m [38;5;168mâ–„â–„[38;5;52;48;5;168mâ–„â–„[38;5;168;48;5;218mâ–„ [38;5;218;48;5;168mâ–„[38;5;168;48;5;52mâ–„[38;5;52;49mâ–„  [0m
             [48;5;52m [38;5;218;48;5;168mâ–„[48;5;218m [38;5;52mâ–„[38;5;181;48;5;52mâ–„â–„[38;5;252;48;5;181mâ–„â–„[38;5;181;48;5;52mâ–„â–„[38;5;52;48;5;218mâ–„ [38;5;218;48;5;168mâ–„[48;5;52m [49m [0m
            [48;5;52m [38;5;131;48;5;168mâ–„[38;5;168;48;5;218mâ–„[48;5;52m [48;5;181m [38;5;15;48;5;52mâ–„[38;5;0mâ–„[48;5;252m  [48;5;52mâ–„[38;5;15mâ–„[48;5;181m [48;5;52m [38;5;168;48;5;218mâ–„[38;5;131;48;5;168mâ–„[48;5;52m [0m
            [38;5;0;48;5;52mâ–„[38;5;52;48;5;131mâ–„ [38;5;131;48;5;52mâ–„[38;5;52;48;5;181mâ–„[38;5;181;48;5;15mâ–„[38;5;252;48;5;0mâ–„[48;5;252m  [48;5;0mâ–„[38;5;181;48;5;15mâ–„[38;5;52;48;5;181mâ–„[38;5;131;48;5;52mâ–„[48;5;131m [48;5;52m [49m [0m
              [38;5;0;48;5;52mâ–„â–„[49m [48;5;52mâ–„[38;5;52;48;5;252mâ–„  [48;5;252mâ–„[38;5;0;48;5;52mâ–„[49m [48;5;52mâ–„â–„[49m  [0m
               [38;5;52mâ–„[38;5;237;48;5;52mâ–„â–„[48;5;237m [48;5;52mâ–„â–„[48;5;237m [48;5;52mâ–„â–„[38;5;52;49mâ–„   [0m
               [48;5;52m [48;5;237m  [38;5;217mâ–„  [38;5;237;48;5;217mâ–„[48;5;237m  [48;5;52m [49m   [0m
               [38;5;0;48;5;52mâ–„[38;5;252;48;5;237mâ–„[48;5;81mâ–„[38;5;217mâ–„â–„â–„â–„â–„â–„â–„â–„[38;5;252mâ–„[49mâ–„[0m
               [38;5;52mâ–„[38;5;237;48;5;252mâ–„[38;5;217mâ–„[48;5;15mâ–„â–„â–„â–„â–„â–„â–„â–„[48;5;252mâ–„[38;5;0mâ–„[0m
               [48;5;52m [48;5;237m [38;5;237;48;5;81mâ–„â–„â–„â–„â–„â–„â–„[38;5;52mâ–„[38;5;0mâ–„â–„[49m [0m
               [48;5;52m [48;5;252m  [38;5;52mâ–„[38;5;0;48;5;52mâ–„â–„[38;5;52;48;5;237mâ–„[38;5;252mâ–„â–„[48;5;52m [49m   [0m
               [38;5;0;48;5;52mâ–„[38;5;52;48;5;252mâ–„[38;5;1mâ–„[48;5;52m [49m  [48;5;52m [48;5;252mâ–„[38;5;52mâ–„[38;5;0;48;5;52mâ–„[49m   [0m
               [38;5;0;48;5;217mâ–„[48;5;52mâ–„[38;5;52;48;5;1mâ–„[38;5;0;48;5;52mâ–„[49m  [48;5;52mâ–„[38;5;52;48;5;1mâ–„[38;5;0;48;5;52mâ–„[48;5;217mâ–„[49m   [0m

            Welcome to xanadu!
          "In Xanadu did Kubla Khan
       A stately pleasure-dome decree:
      Where Alph, the sacred river, ran
      Through caverns measureless to man
          Down to a sunless sea."
    '';


    time.timeZone = "Europe/Paris";

    #modules.tor.transparentProxy = {
    #  enable = true; 
    #  outputNic = "wlp1s0"; 
    #  inputNic = "wlp1s0"; 
    #  };


    navi.components = {
      bluetooth.enable = true;
      virtualization.enable = true;
      wm = {
        battery = true;
        azerty = true;
        extraConf = ''
          output eDP-1 scale 2.0
          input "2:10:TPPS/2_IBM_TrackPoint" {
            pointer_accel 0.5
          }
          input "1:1:AT_Translated_Set_2_keyboard" {
            xkb_layout "fr"
          }
        '';
      };
    };

    home-manager.users.govanify = {
      home.file."Pictures/wallpaper.png".source = ./wallpaper.png;
    };

    navi.profile.name = "laptop";
  };
}
